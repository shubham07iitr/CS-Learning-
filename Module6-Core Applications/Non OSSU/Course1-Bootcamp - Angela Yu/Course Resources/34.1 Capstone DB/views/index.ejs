<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomePage</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <style>
        footer { bottom: 0; width: 100%; background-color: lightblue; padding-left: 10px; padding-right: 10px;}
        #heading {display: flex; padding: 10px; gap: 20px; margin-top: 20px; justify-content:flex-start}
        .bookBlock {border: solid 2px gray; display: flex; margin-left: 20px; margin-right: 20px ; padding: 15px; height: 150px; justify-content:start; gap: 20px; margin-top: 10px;}
        .bookDetails {margin-left: 20px;}
        
    </style>
</head>
<body>
    <!--Importing the header file-->
    <%- include('header.ejs')%>
    <main>
        <div id = "heading">
            <h2> View all my Reads</h2>
            <form action ="/sortRating" method = "GET">
                <button type="submit" class="btn btn-secondary">Sort by Rating</button>
            </form>
            <form action ="/sortRead" method = "GET">
                <button type="submit" class="btn btn-secondary">Sort by Date Read</button>
            </form>
        </div>

        <!--Now defining boxes for each of the books-->
        <div id = "listBooks">
            <% for (var i = 0; i < books.length; i++) {%>
                <div class = "bookBlock">
                    <img src = "https://covers.openlibrary.org/b/isbn/<%= books[i].isbn%>-M.jpg">
                    <div class = "bookDetails">
                        <h4><a href = "/<%= books[i].id%>">Title: <%= books[i].title%></a></h4>
                        <h6>Author: <%= books[i].author%></h4>
                        <h6>Date Read: <%= books[i].date_read.toLocaleDateString('en-US')%></h4>
                        <h6>Rating: <%= books[i].rating%></h6>
                    </div>
                </div>
            <% }%>
        </div>

    </main>

    <!--Importing the footer file-->
    <%- include('footer.ejs')%>

</body>
</html>