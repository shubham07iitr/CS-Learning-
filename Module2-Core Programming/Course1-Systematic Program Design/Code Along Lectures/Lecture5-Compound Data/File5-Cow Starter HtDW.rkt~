;; The first three lines of this file were inserted by DrRacket. They record metadata
;; about the language level of this file in a form that our tools can easily process.
#reader(lib "htdp-beginner-reader.ss" "lang")((modname |File5-Cow Starter HtDW|) (read-case-sensitive #t) (teachpacks ()) (htdp-settings #(#t constructor repeating-decimal #f #t none #f () #f)))
(require 2htdp/image)

; Design a world program with following behaviior:
;; - Cow walks back and forth across screen
;; - Changes direction and goes back the other way
;; - When you start the program it should be possible to control how fast it walks
;; - Pressing space makes it change direction right away

;; =============================
;; Constants:

(define WIDTH 400)
(define HEIGHT 200)

(define CTR-Y (/ HEIGHT 2))

(define RCOW (bitmap "cowr.png"))
(define RCOW (bitmap "cowl.png"))


;; =============================
;; Data Defintions:

(define-struct cow (x dx))
;; Cow is (make-cow Natural[0, WIDTH], Integer)
;; Interp. (make-cow x dx) is a cow with x coordinate x and velocity dx
;;    x is the center of cow
;;    x is in screen coordinates (pixels)
;;    dx is in pixels per tick

(define C1 (make-cow 10 3)) ; at 10, moving left > right
(define C2 (make-cow 20 -4)) ; at 20 moving left < right

#;
(define (fn-for-cow c)
  (... (cow-x c) ; Natural [0, WIDTH]
       (cow-dx c))) ; Integer


;; Template rules used:
;; - compound: 2 fields

;; =============================
;; Functions

;; Cow -> Cow
;; called to make the cow go for a walk ; start with (main (make-cow))
;; no tests for main function
(define (main c)
  (big bang c
       (on-tick next-cow)    ; Cow -> Cow
       (to-draw render-cow)  ; Cow -> Image
       (on-key handle-key))) ; Cow KeyEvent -> Cow



;; Cow -> Cow
;; increase cow x by dx; bounce off edges
(check-expect (next-cow (make-cow 20 3)) (make-cow (+ 20 3) 3)) ;; middle cases
(check-expect (next-cow (make-cow 20 -3)) (make-cow (- 20 3) -3))


(check-expect (next-cow (make-cow (- WIDTH 3) 3)) (make-cow WIDTH 3)) ; reaches edge
(check-expect (next-cow (make-cow 3 -3)) (make-cow 0 -3)) ; reaches edge

(check-expect (next-cow (make-cow (- WIDTH 2) 3)) (make-cow WIDTH -3)) ; bounces off edge
(check-expect (next-cow (make-cow 2 -3)) (make-cow 0 3))

; (define (next-cow c) c) ; stub

; took template from Cow
(define (next-cow c)
  (cond [(> (+ (cow-x c) (cow-dx c)) WIDTH) (make-cow WIDTH (- (cow-dx c)))]
        [(< (+ (cow-x c) (cow-dx c)) 0) (make-cow 0         (- (cow-dx c)))]
        [else
         (make-cow (+ (cow-x c) (cow-dx c)) (cow-dx c))]))



;; Cow -> Image
;; place appropriate cow image on MTS at (cow-x c) and CTR-Y
;; !!!
(define (render-cow c) MTS) ; stub

;; Cow KeyEvent -> Cow
;; reverse directino of cow travel when space bar is pressed
(define (handle-key c ke) c) ; stub
























